<!DOCTYPE html>
<html>
	<head lang="en">
		   
		<meta charset="UTF-8">
		    <title></title>  
		   
		<script type="text/javascript">
          window.onload = function () {
            let image = new Image();
            image.src = './imgs/fly-dog.gif';
            image.onload = function () {
              let canvas = document.createElement('canvas');
              let context = canvas.getContext('2d');

              let imgWidth = image.width;
              let imgHeight = image.height;
              // 取宽高最小值作为正方形边长
              let eLength = Math.min(imgWidth, imgHeight);
              canvas.width = eLength;
              canvas.height = eLength;
              context.drawImage(image,
                (imgWidth - eLength) / 2, (imgHeight - eLength) / 2,
                eLength, eLength, 0, 0, eLength, eLength);
              document.body.appendChild(canvas);
            }
          }
		</script>
	</head>
	<body style="margin:0px;padding:0px;">
	</body>
</html>
